{% extends 'base.html' %}
{% block title %} 비밀번호 변경 페이지 {% endblock %}
{% block content %}

<body>

    {% load static %}
    <link rel="stylesheet" href="{% static 'main.css' %}">

<div class="container">
    <div style="margin-top: 5rem !important;">
        <div class="col-12">

            <div class="row justify-content-center" style="margin-top:20px; margin-bottom: 50px;">
                <div class="card" style="width: 500px;">
                    <div class="card-header" style="padding-bottom:8px;">
                        <strong style="font-size: 18px; color: #585858"><i class="fas fa-user-lock"></i>비밀번호 변경</strong>
                    </div>
                    <div class="card-body">
                        <form method="POST" novalidate>
                            {% csrf_token %}

                            <p style="color:gray; margin-bottom: 15px;"><i class="fas fa-exclamation-triangle"></i><b style="color: #7D926C">{{ user.username }}</b> 계정의 비밀번호를 변경합니다.</p>

                            <!--현재 비밀번호-->
                            <div class="mb-4 md-form">
                                <label name="label_old_password" style="font-size:15px; color: #848484"><i class="fas fa-lock"></i><b>{{ password_change_form.old_password.label }}</b></label>
                                {{ password_change_form.old_password }}
                                <script type="text/javascript">
                                    if (document.getElementsByName('old_password')[0].value != '') {
                                        document.getElementsByName('label_old_password')[0].setAttribute('class', 'active');
                                    }
                                </script>
                                {% if password_change_form.old_password.errors %}
                                <script type="text/javascript">
                                    document.getElementsByName('old_password')[0].setAttribute('class', 'form-control is-invalid')
                                </script>
                                {% for error in password_change_form.old_password.errors %}
                                <div class="invalid-feedback" style="margin-bottom:-10px;">
                                    {{ error }}
                                </div>
                                {% endfor %}
                                {% endif %}
                            </div>

                            <!--새 비밀번호-->
                            <div class="mb-4 md-form">
                                <label name="label_new_password1" style="font-size:15px; color: #848484"><i class="fas fa-unlock"></i><b>{{ password_change_form.new_password1.label }}</b></label>
                                {{ password_change_form.new_password1 }}
                                <script type="text/javascript">
                                    if (document.getElementsByName('new_password1')[0].value != '') {
                                        document.getElementsByName('label_new_password1')[0].setAttribute('class', 'active');
                                    }
                                </script>
                                {% if password_change_form.new_password1.errors %}
                                <script type="text/javascript">
                                    document.getElementsByName('new_password1')[0].setAttribute('class', 'form-control is-invalid')
                                </script>
                                {% for error in password_change_form.new_password1.errors %}
                                <div class="invalid-feedback" style="margin-bottom:-10px;">
                                    {{ error }}
                                </div>
                                {% endfor %}
                                {% endif %}
                            </div>

                            <!--새 비밀번호확인-->
                            <div class="mb-4 md-form">
                                <label name="label_new_password2" style="font-size:15px; color: #848484"><i class="fas fa-unlock-alt"></i><b>{{ password_change_form.new_password2.label }}</b></label>
                                {{ password_change_form.new_password2 }}
                                <script type="text/javascript">
                                    if (document.getElementsByName('new_password2')[0].value != '') {
                                        document.getElementsByName('label_new_password2')[0].setAttribute('class',
                                            'active');
                                    }
                                </script>
                                {% if password_change_form.new_password2.errors %}
                                <script type="text/javascript">
                                    document.getElementsByName('new_password2')[0].setAttribute('class',
                                        'form-control is-invalid')
                                </script>
                                {% for error in password_change_form.new_password2.errors %}
                                <div style="white-space: nowrap;" class="invalid-feedback">
                                    {{ error }}
                                </div>
                                {% endfor %}
                                {% endif %}
                                <small style="margin-left: 4px; margin-top:9px; margin-bottom: 30px;" class="form-text text-muted">
                                    최소 8개의 숫자와 문자 또는 특수기호를 입력해주세요.
                                </small>

                            <div style="text-align: right; margin-bottom:-25px;">
                                <a href="{% url 'zeronine:mypage_list' %}" style="text-decoration:none; color:#424242; background-color: #E6E6E6; width:82px; vertical-align: middle; height: 35px; line-height: 25px;" class="btn btn-sm" id="back_btn"><i class="fa fa-reply"></i><b>돌아가기</b></a>&nbsp;

                                {% if password_change_form.old_password and password_change_form.new_password1 and password_change_form.new_password2 %}
                                <a onclick="alert('비밀번호가 변경되었습니다.');" style="cursor:pointer;">
                                    <button type="submit" style="color:white; background-color: #8A9D7B; width:82px; height:35px;" class="btn btn-sm" id="detail_btn"><i class="fas fa-check"></i><b>변경하기</b></button></a>
                                {% endif %}

                            </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}